<!DOCTYPE html>
<html lang="zh-cn">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width" />
  <script
    type="application/javascript"
    src='https://rvnox.github.io/js/theme-mode.js'
  ></script>
  <link rel="stylesheet" href='https://rvnox.github.io/css/frameworks.min.css' />
  <link rel="stylesheet" href='https://rvnox.github.io/css/github.min.css' />
  <link rel="stylesheet" href='https://rvnox.github.io/css/github-style.css' />
  <link rel="stylesheet" href='https://rvnox.github.io/css/light.css' />
  <link rel="stylesheet" href='https://rvnox.github.io/css/dark.css' />
  <link rel="stylesheet" href='https://rvnox.github.io/css/syntax.css' />
  
  <link rel="stylesheet" href="/custom.css" />
  
  <title>
    山石 SG-6000 防火墙日志与可视化 | rvnox&#39;s Blog
  </title>
  
  <link rel="icon" type="image/x-icon" href="/images/github-mark.png" />
  
  <meta name="theme-color" content="#1e2327" />

  
  <meta
  name="description"
  content="本文为山石防火墙 SG-6000 中日志的的可视化教程，以 VPN 用户的登陆情况为例 &amp;hellip;"
/>
<meta name="robots" content="noodp" />
<link rel="canonical" href="https://rvnox.github.io/post/2025-0224-01/" />


<meta name="twitter:card" content="summary" />
<meta
  name="twitter:title"
  content="山石 SG-6000 防火墙日志与可视化 - rvnox&#39;s Blog"
/>
<meta
  name="twitter:description"
  content="本文为山石防火墙 SG-6000 中日志的的可视化教程，以 VPN 用户的登陆情况为例 &amp;hellip;"
/>
<meta name="twitter:site" content="https://rvnox.github.io/" />
<meta name="twitter:creator" content="" />
<meta
  name="twitter:image"
  content="https://rvnox.github.io/"
/>


<meta
  property="og:type"
  content="article"
/>
<meta
  property="og:title"
  content="山石 SG-6000 防火墙日志与可视化 - rvnox&#39;s Blog"
/>
<meta
  property="og:description"
  content="本文为山石防火墙 SG-6000 中日志的的可视化教程，以 VPN 用户的登陆情况为例 &amp;hellip;"
/>
<meta property="og:url" content="https://rvnox.github.io/post/2025-0224-01/" />
<meta property="og:site_name" content="山石 SG-6000 防火墙日志与可视化" />
<meta
  property="og:image"
  content="https://rvnox.github.io/"
/>
<meta property="og:image:width" content="2048" />
<meta property="og:image:height" content="1024" />

<meta property="article:published_time" content="2025-02-24 19:07:02 &#43;0800 &#43;0800" />















</head>


<script src="/js/pangu.js"></script>

<script>
	document.addEventListener('DOMContentLoaded', () => {
			pangu.autoSpacingPage();
	});
</script>

<body>
  

<style>
  .height-limitation {
    max-height: 300px;
    overflow-y: scroll;
  }

  .loader {
    border: 4px solid #f3f3f3;
    border-bottom: 4px solid var(--color-fg-muted);
    border-radius: 50%;
    width: 30px;
    height: 30px;
    animation: spin 1s linear infinite;
    margin: 0 auto;
  }

  @keyframes spin {
    0% {
      transform: rotate(0deg);
    }
    100% {
      transform: rotate(360deg);
    }
  }
</style>

<div style="position: relative">
  <header
    class="Header js-details-container Details px-3 px-md-4 px-lg-5 flex-wrap flex-md-nowrap open Details--on"
  >
    <div
      class="Header-item mobile-none"
      style="margin-top: -4px; margin-bottom: -4px"
    >
      <a class="Header-link" href="https://rvnox.github.io/" aria-label="Home">
        <svg
          class="octicon"
          height="32"
          viewBox="0 0 16 16"
          version="1.1"
          width="32"
        >
          <path
            fill-rule="evenodd"
            d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"
          ></path>
        </svg>
      </a>
    </div>
    <div class="Header-item d-md-none">
      <button
        class="Header-link btn-link js-details-target"
        type="button"
        onclick="document.querySelector('#header-search').style.display = document.querySelector('#header-search').style.display == 'none'? 'block': 'none'"
        aria-label="Search"
      >
        <svg
          height="24"
          class="octicon octicon-three-bars"
          viewBox="0 0 16 16"
          version="1.1"
          width="24"
        >
          <path
            fill-rule="evenodd"
            d="M1 2.75A.75.75 0 011.75 2h12.5a.75.75 0 110 1.5H1.75A.75.75 0 011 2.75zm0 5A.75.75 0 011.75 7h12.5a.75.75 0 110 1.5H1.75A.75.75 0 011 7.75zM1.75 12a.75.75 0 100 1.5h12.5a.75.75 0 100-1.5H1.75z"
          ></path>
        </svg>
      </button>
    </div>
    <div
      style="display: none"
      id="header-search"
      class="Header-item Header-item--full flex-column flex-md-row width-full flex-order-2 flex-md-order-none mr-0 mr-md-3 mt-3 mt-md-0 Details-content--hidden-not-important d-md-flex"
    >
      <div
        class="Header-search header-search flex-auto js-site-search position-relative flex-self-stretch flex-md-self-auto mb-3 mb-md-0 mr-0 mr-md-3 scoped-search site-scoped-search js-jump-to"
      >
        <div class="position-relative">
          <form
            target="_blank"
            action="https://www.google.com/search"
            accept-charset="UTF-8"
            method="get"
            autocomplete="off"
          >
            <label
              class="Header-search-label form-control input-sm header-search-wrapper p-0 js-chromeless-input-container header-search-wrapper-jump-to position-relative d-flex flex-justify-between flex-items-center"
            >
              <input
                type="text"
                class="Header-search-input form-control input-sm header-search-input jump-to-field js-jump-to-field js-site-search-focus js-site-search-field is-clearable"
                name="q"
                value=""
                placeholder="Search"
                autocomplete="off"
              />
              <input type="hidden" name="q" value="site:https://rvnox.github.io/" />
              <div
                class="js-jump-to-suggestions-container jump-to-suggestions overflow-hidden position-absolute"
              >
                <div
                  id="search-progress"
                  class="d-none color-bg-primary no-underline p-2"
                  role="progress"
                  aria-selected="false"
                >
                  <div class="loader"></div>
                </div>

                <ul
                  id="jump-to-results"
                  role="listbox"
                  class="Box border-0 p-0 m-0 js-navigation-container jump-to-suggestions-results-container js-jump-to-suggestions-results-container js-active-navigation-container height-limitation"
                ></ul>
              </div>
            </label>
          </form>
        </div>
      </div>
    </div>

    <div
      class="Header-item Header-item--full flex-justify-center d-md-none position-relative"
    >
      <a class="Header-link" href="https://rvnox.github.io/" aria-label="Home">
        <svg
          class="octicon octicon-mark-github v-align-middle"
          height="32"
          viewBox="0 0 16 16"
          version="1.1"
          width="32"
        >
          <path
            fill-rule="evenodd"
            d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"
          ></path>
        </svg>
      </a>
    </div>
    <div class="Theme-switcher Header-item" style="margin-right: 0">
      <span
        role="button"
        class="Header-link no-select"
        onclick="switchTheme()"
        style="cursor: pointer"
        aria-label="Switch theme"
      >
        <svg
          style="fill: var(--color-profile-color-modes-toggle-moon)"
          class="no-select"
          viewBox="0 0 16 16"
          version="1.1"
          width="16"
          height="16"
        >
          <path
            fill-rule="evenodd"
            clip-rule="evenodd"
            d="M4.52208 7.71754C7.5782 7.71754 10.0557 5.24006 10.0557 2.18394C10.0557 1.93498 10.0392 1.68986 10.0074 1.44961C9.95801 1.07727 10.3495 0.771159 10.6474 0.99992C12.1153 2.12716 13.0615 3.89999 13.0615 5.89383C13.0615 9.29958 10.3006 12.0605 6.89485 12.0605C3.95334 12.0605 1.49286 10.001 0.876728 7.24527C0.794841 6.87902 1.23668 6.65289 1.55321 6.85451C2.41106 7.40095 3.4296 7.71754 4.52208 7.71754Z"
          ></path>
        </svg>
      </span>
    </div>
  </header>
</div>

  
<script type="text/javascript" src="/js/initimage.js"></script>



<div>
  <main>
    <div class="gisthead pagehead bg-gray-light pb-0 pt-3 mb-4">
      <div class="px-0">
        <div class="mb-3 d-flex px-3 px-md-3 px-lg-5">
          <div class="flex-auto min-width-0 width-fit mr-3">
            <div class="d-flex">
              <div class="d-none d-md-block">
                <a class="avatar mr-2 flex-shrink-0" href="https://rvnox.github.io/">
                  <img class=" avatar-user"
                    src="/images/avatar.png"
                    width="32" height="32" alt="κόραξ"></a>
              </div>
              <div class="d-flex flex-column">
                <h1 class="break-word f3 text-normal mb-md-0 mb-1">
                  <span class="author">
                    <a href="https://rvnox.github.io/">κόραξ</a></span><span
                    class="path-divider">/</span><strong class="css-truncate-target mr-1" style="max-width: 410px"><a
                      href="https://rvnox.github.io/post/2025-0224-01/">山石 SG-6000 防火墙日志与可视化</a></strong>
                </h1>
                <div class="note m-0">
                  Created <relative-time datetime="Mon, 24 Feb 2025 19:07:02 &#43;0800"
                    class="no-wrap">
                    Mon, 24 Feb 2025 19:07:02 &#43;0800</relative-time>

                  
                  <span class="file-info-divider"></span>
                  Modified <relative-time datetime="Mon, 11 Aug 2025 03:57:30 &#43;0000"
                    class="no-wrap">
                    Mon, 11 Aug 2025 03:57:30 &#43;0000</relative-time>
                  
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="container-lg px-3 new-discussion-timeline">
      <div class="repository-content gist-content">
        <div>
          <div class="js-gist-file-update-container js-task-list-container file-box">
            <div id="file-pytest" class="file my-2">
              <div id="post-header" class="file-header d-flex flex-md-items-center flex-items-start sticky-header" style="z-index: 2">
                <div class="file-info d-flex flex-md-items-center flex-items-start flex-order-1 flex-auto">
                  <div class="text-mono f6 flex-auto pr-3 flex-order-2 flex-md-order-1 mt-2 mt-md-0">
                    
                    <summary id="toc-toggle" onclick="clickToc()" class="btn btn-octicon m-0 mr-2 p-2">
                      <svg aria-hidden="true" viewBox="0 0 16 16" height="16" width="16" class="octicon octicon-list-unordered">
                        <path fill-rule="evenodd" d="M2 4a1 1 0 100-2 1 1 0 000 2zm3.75-1.5a.75.75 0 000 1.5h8.5a.75.75 0 000-1.5h-8.5zm0 5a.75.75 0 000 1.5h8.5a.75.75 0 000-1.5h-8.5zm0 5a.75.75 0 000 1.5h8.5a.75.75 0 000-1.5h-8.5zM3 8a1 1 0 11-2 0 1 1 0 012 0zm-1 6a1 1 0 100-2 1 1 0 000 2z"></path>
                      </svg>
                    </summary>
                    <details-menu class="SelectMenu" id="toc-details" style="display: none;">
                      <div class="SelectMenu-modal rounded-3 mt-1" style="max-height: 340px;">
                        <div class="SelectMenu-list SelectMenu-list--borderless p-2" style="overscroll-behavior: contain;" id="toc-list">
                        </div>
                      </div>
                    </details-menu>
                      1803 Words
                    <span class="file-info-divider"></span>
                                        8 min

                  </div>
                  <div class="file-actions flex-order-2 pt-0">
  
    
       
       
       
       
      
        
        
        
       
      <a class="muted-link mr-3" href="/tags/graylog">
        <span class="repo-language-color" style="background-color: #979994"></span>
        GrayLog
      </a>
    
  

                  </div>
                </div>
              </div>


              <div class="Box-body px-5 pb-5" style="z-index: 1">
                <article class="markdown-body entry-content container-lg"><p><img 
  src="./2025-0224-01/image-20250803114925580.png" 
  alt="image-20250803114925580" 
   
  class="custom-image-class"
  srcset="./2025-0224-01/image-20250803114925580.png 1.25x"
 />


<script>
function improveImage() {
    

    
    const images = document.querySelectorAll('img');

    images.forEach((item) => {
        
        let srcset = item.getAttribute('srcset');
        if (srcset) {
            let imageName = srcset.match(/image-(\d+\.(png|jpg|jpeg|gif))\s(\d+(\.\d+)?x)/i); 
            if (imageName) {
                item.setAttribute('srcset', imageName[0]);
            }
        }
    });
}


document.addEventListener('DOMContentLoaded', () => {
    improveImage();
});
</script></p>
<h1 id="graylog-和-elk">GrayLog 和 Elk</h1>
<p>ELK的问题：</p>
<ul>
<li>多行日志处理不足： ELK无法很好地处理多行日志，例如Mysql慢查询或Tomcat/Jetty应用的Java异常打印。</li>
<li>原始日志保存不足： ELK无法保留原始日志，只能将其分字段保存，导致搜索结果呈现为一堆Json格式文本，难以阅读。</li>
<li>不匹配正则表达式的日志行丢失： ELK对于不符合正则表达式匹配的日志行，会被全部丢弃。</li>
</ul>
<p>GrayLog的优势：</p>
<ul>
<li>一体化方案： GrayLog是一体化方案，安装方便，无需解决ELK中3个独立系统间的集成问题。</li>
<li>采集原始日志： GrayLog能够采集原始日志，并可以事后再添加字段，例如http_status_code、response_time等。</li>
<li>自定义日志采集脚本： GrayLog允许开发者自行开发日志采集脚本，并使用curl/nc将其发送到Graylog Server。这些脚本可以使用自定义的GELF（Graylog Extended Log Format），而Fluentd和Logstash也提供了相应的输出GELF消息的插件。实际上，只需使用inotifywait监控日志的modify事件，并使用curl/netcat将新增行发送到Graylog Server即可。</li>
<li>搜索结果高亮显示： GrayLog的搜索结果能够高亮显示，类似于Google搜索。</li>
<li>简单搜索语法： GrayLog的搜索语法简单易懂，例如：source:mongo AND response_time_ms:&gt;5000，避免直接输入Elasticsearch搜索JSON语法。</li>
<li>导出搜索条件为Elasticsearch JSON文本： GrayLog允许用户将搜索条件导出为Elasticsearch的搜索JSON文本，方便直接开发调用Elasticsearch REST API的搜索脚本。</li>
</ul>
<h2 id="graylog-简介">GrayLog 简介</h2>
<p>GrayLog是一个轻量型的分布式日志管理平台，一个开源的日志聚合、分析、审计、展示和预警工具。在功能上来说，和 ELK类似，但又比 ELK要简单轻量许多。依靠着更加简洁，高效，部署使用简单的优势很快受到许多公司的青睐。</p>
<p><img 
  src="./2025-0224-01/image-20250803115925927.png" 
  alt="image-20250803115925927" 
   
  class="custom-image-class"
  srcset="./2025-0224-01/image-20250803115925927.png 1.25x"
 />


<script>
function improveImage() {
    

    
    const images = document.querySelectorAll('img');

    images.forEach((item) => {
        
        let srcset = item.getAttribute('srcset');
        if (srcset) {
            let imageName = srcset.match(/image-(\d+\.(png|jpg|jpeg|gif))\s(\d+(\.\d+)?x)/i); 
            if (imageName) {
                item.setAttribute('srcset', imageName[0]);
            }
        }
    });
}


document.addEventListener('DOMContentLoaded', () => {
    improveImage();
});
</script></p>
<p>流程如下：</p>
<ul>
<li>微服务中的GrayLog客户端发送日志到GrayLog服务端</li>
<li>GrayLog把日志信息格式化，存储到Elasticsearch</li>
<li>客户端通过浏览器访问GrayLog，GrayLog访问Elasticsearch</li>
</ul>
<p><strong>MongoDB是用来存储GrayLog的配置信息的，这样搭建集群时，GrayLog的各节点可以共享配置</strong></p>
<h2 id="graylog-分布式平台部署">GrayLog 分布式平台部署</h2>
<p>GrayLog 使用 docker 安装，需要安装的包括：</p>
<ul>
<li>MongoDB：用来存储GrayLog的配置信息</li>
<li>Elasticsearch：用来存储日志信息</li>
<li>GrayLog：GrayLog服务端</li>
</ul>
<p>下面是通过 docker 的方式部署：</p>
<h3 id="文件准备和elasticsearch安装">文件准备和Elasticsearch安装</h3>
<p>配置文件夹用于存储数据</p>
<pre tabindex="0"><code>mkdir -p /mydata/es-data  /mydata/es-plugins /mydata/mongodb
</code></pre><p>注意要给chmod 777 /mydata/es-data设置权限</p>
<pre tabindex="0"><code>chmod 777 /mydata/es-data
</code></pre><p>安装部署 Elasticsearch</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1">#部署Elasticsearch</span>
</span></span><span class="line"><span class="cl">docker run -d <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    --name elasticsearch <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    -e <span class="s2">&#34;ES_JAVA_OPTS=-Xms512m -Xmx512m&#34;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    -e <span class="s2">&#34;discovery.type=single-node&#34;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    -v /mydata/es-data:/usr/share/elasticsearch/data <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    -v /mydata/es-plugins:/usr/share/elasticsearch/plugins <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    -p 9200:9200 <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    -p 9300:9300 <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>elasticsearch:7.17.5
</span></span></code></pre></div><h3 id="部署mongodb">部署MongoDB</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">docker run -d <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>--name mongodb <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>-p 27017:27017 <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>--restart<span class="o">=</span>always <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>-v /mydata/mongodb:/data/db <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>-e <span class="nv">MONGO_INITDB_ROOT_USERNAME</span><span class="o">=</span>zbbmeta <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>-e <span class="nv">MONGO_INITDB_ROOT_PASSWORD</span><span class="o">=</span><span class="m">123321</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>mongo:5.0  
</span></span></code></pre></div><h3 id="部署graylog">部署graylog</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">docker run <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>--name graylog <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>-p 9000:9000 <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>-p 12201:12201/udp <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>-e <span class="nv">GRAYLOG_HTTP_EXTERNAL_URI</span><span class="o">=</span>http://192.168.150.102:9000/ <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>-e <span class="nv">GRAYLOG_ELASTICSEARCH_HOSTS</span><span class="o">=</span>http://192.168.150.102:9200/ <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>-e <span class="nv">GRAYLOG_ROOT_TIMEZONE</span><span class="o">=</span><span class="s2">&#34;Asia/Shanghai&#34;</span>  <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>-e <span class="nv">GRAYLOG_WEB_ENDPOINT_URI</span><span class="o">=</span><span class="s2">&#34;http://192.168.150.102:9000/:9000/api&#34;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>-e <span class="nv">GRAYLOG_PASSWORD_SECRET</span><span class="o">=</span><span class="s2">&#34;somepasswordpepper&#34;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>-e <span class="nv">GRAYLOG_ROOT_PASSWORD_SHA2</span><span class="o">=</span>8c6976e5b5410415bde908bd4dee15dfb167a9c873fc4bb8a81f6f2ab448a918 <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>-e <span class="nv">GRAYLOG_MONGODB_URI</span><span class="o">=</span>mongodb://zbbmeta:123321@192.168.150.102:27017/admin <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>-d <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>graylog/graylog:6.0 
</span></span></code></pre></div><p>命令解读：</p>
<ul>
<li>
<p>端口信息：</p>
<ul>
<li>
<p>-p 9000:9000：GrayLog的http服务端口，9000</p>
</li>
<li>
<p>-p 12201:12201/udp：GrayLog的GELF UDP协议端口，用于接收从微服务发来的日志信息</p>
</li>
</ul>
</li>
<li>
<p>环境变量</p>
<ul>
<li>-e GRAYLOG_HTTP_EXTERNAL_URI：对外开放的ip和端口信息，这里用9000端口</li>
<li>-e GRAYLOG_ELASTICSEARCH_HOSTS：GrayLog依赖于ES，这里指定ES的地址</li>
<li>-e GRAYLOG_WEB_ENDPOINT_URI：对外开放的API地址</li>
<li>-e GRAYLOG_ROOT_PASSWORD_SHA2：密码加密后的密文。明文是admin，账户也是admin</li>
<li>-e GRAYLOG_ROOT_TIMEZONE=&ldquo;Asia/Shanghai&rdquo;：GrayLog容器内时区</li>
<li>-e GRAYLOG_MONGODB_URI：指定MongoDB的链接信息</li>
</ul>
</li>
</ul>
<p><strong>GRAYLOG_ROOT_PASSWORD_SHA2可以使用以下命令进行生成</strong></p>
<pre tabindex="0"><code>echo -n &#34;Enter Password: &#34; &amp;&amp; head -1 &lt; /dev/stdin | tr -d &#39;\n&#39; | sha256sum | cut -d &#34; &#34; -f1
</code></pre><p>访问地址 http://192.168.150.102:9000/ ， 如果可以看到如下界面说明启动成功。</p>
<p><img 
  src="./2025-0224-01/image-20250803200843206.png" 
  alt="image-20250803200843206" 
   
  class="custom-image-class"
  srcset="./2025-0224-01/image-20250803200843206.png 1.25x"
 />


<script>
function improveImage() {
    

    
    const images = document.querySelectorAll('img');

    images.forEach((item) => {
        
        let srcset = item.getAttribute('srcset');
        if (srcset) {
            let imageName = srcset.match(/image-(\d+\.(png|jpg|jpeg|gif))\s(\d+(\.\d+)?x)/i); 
            if (imageName) {
                item.setAttribute('srcset', imageName[0]);
            }
        }
    });
}


document.addEventListener('DOMContentLoaded', () => {
    improveImage();
});
</script></p>
<p>通过 admin/admin登录，即可看到欢迎页面。</p>
<h1 id="日志收集和-grok-字段切割">日志收集和 Grok 字段切割</h1>
<p>测试</p>
<h1 id="集成-geo_ip-库">集成 Geo_IP 库</h1>
<h1 id="grafanfa-可视化">Grafanfa 可视化</h1>
</article>
              </div>

              
            </div>
          </div>
        </div>
      </div>

      <div class="pagination-nav">
        <div class="pagination-button next-post">
          
          <div>«&nbsp;</div><a class="pagination-link link-reverse" href="https://rvnox.github.io/post/2025-0309-01/"> Grafana 变量</a>
          
        </div>
        
        <div class="pagination-button previous-post">
          
          <a class="pagination-link link-reverse" href="https://rvnox.github.io/post/2024-1225-01/">Go modules 剖析&nbsp;</a><div> »</div>
          
        </div>
      </div>
    </div>
  </main>
</div>
<script type="application/javascript" src='https://rvnox.github.io/js/toc.js'></script>
<link rel="stylesheet" href='https://rvnox.github.io/css/toc.css' />


  <div class="footer container-xl width-full p-responsive">
  <div
    class="position-relative d-flex flex-row-reverse flex-lg-row flex-wrap flex-lg-nowrap flex-justify-center flex-lg-justify-between flex-sm-items-center pt-6 pb-2 mt-6 f6 text-gray border-top border-gray-light ">
    <a aria-label="Homepage" title="GitHub" class="footer-octicon d-none d-lg-block mr-lg-4" href="https://rvnox.github.io/">
      <svg height="24" class="octicon octicon-mark-github" viewBox="0 0 16 16" version="1.1" width="24">
        <path fill-rule="evenodd"
          d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z">
        </path>
      </svg>
    </a>
    <ul class="list-style-none d-flex flex-wrap col-12 flex-justify-center flex-lg-justify-between mb-2 mb-lg-0">
      
      <li class="mr-3 mr-lg-0">Theme by <a href='https://github.com/MeiK2333/github-style'>github-style</a></li>
      
    </ul>
  </div>
  <div class="d-flex flex-justify-center pb-6">
    <span class="f6 text-gray-light"></span>
  </div>


</div>
</body>

<script type="application/javascript" src="https://rvnox.github.io/js/github-style.js"></script>

<script src="https://rvnox.github.io/js/mark.es6.min.js"></script>







</html>